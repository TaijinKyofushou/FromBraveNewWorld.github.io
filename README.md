# AVG Engine - Universal Reader

ä¸€ä¸ªé€šç”¨çš„æ–‡å­—å†’é™©æ¸¸æˆï¼ˆAVGï¼‰æ’­æ”¾å™¨å¼•æ“Žï¼Œæ”¯æŒé€šè¿‡ JSON æ ¼å¼çš„å‰§æœ¬æ–‡ä»¶åˆ›å»ºå’Œè¿è¡Œäº¤äº’å¼æ–‡å­—æ¸¸æˆã€‚

## ðŸ“– é¡¹ç›®ç®€ä»‹

åŽŸå¼•æ“Ž AVG Engine æ¥è‡ªå°çº¢ä¹¦åšä¸»å±±éŸ³ï¼ˆå°çº¢ä¹¦å·ï¼šlifish0623ï¼‰ï¼Œæ˜¯ä¸€ä¸ªçº¯å‰ç«¯çš„æ–‡å­—å†’é™©æ¸¸æˆå¼•æ“Žï¼Œæ— éœ€åŽç«¯æœåŠ¡å™¨å³å¯è¿è¡Œã€‚å®ƒæ”¯æŒå¤šåˆ†æ”¯å‰§æƒ…ã€æ•°å€¼ç³»ç»Ÿã€æˆå°±ç³»ç»Ÿã€å¤šå‘¨ç›®æ¨¡å¼ç­‰å®Œæ•´çš„æ¸¸æˆåŠŸèƒ½ã€‚é€šè¿‡å¯¼å…¥ç¬¦åˆç‰¹å®šæ ¼å¼çš„ JSON å‰§æœ¬æ–‡ä»¶ï¼Œå³å¯å¿«é€Ÿåˆ›å»ºå’Œä½“éªŒæ–‡å­—å†’é™©æ¸¸æˆã€‚

æœ¬é¡¹ç›®æ”¹åŠ¨è¯¥å¼•æ“Žï¼Œå¢žåŠ äº†æ—¶é—´è½´æ˜¾ç¤ºã€å¤šå‘¨ç›®æ¦‚æ‹¬ã€èƒŒæ™¯éŸ³ä¹å’Œæˆå°±ç³»ç»Ÿï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„åŒäººæ¸¸æˆã€Šè‡ªæ–°ä¸–ç•Œã€‹ï¼ˆTime Loop Adventureï¼‰ã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### æ¸¸æˆåŠŸèƒ½
- ðŸ“š **å¤šåˆ†æ”¯å‰§æƒ…ç³»ç»Ÿ** - æ”¯æŒå¤æ‚çš„å‰§æƒ…åˆ†æ”¯å’Œæ¡ä»¶è·¯ç”±
- ðŸŽ¯ **æ•°å€¼ç³»ç»Ÿ** - å¯è‡ªå®šä¹‰çš„æ•°å€¼å˜é‡ï¼ˆå¦‚å‹‡æ°”å€¼ã€å¥½æ„Ÿåº¦ç­‰ï¼‰
- ðŸ† **æˆå°±ç³»ç»Ÿ** - æ”¯æŒç»“å±€æˆå°±å’Œæ®µè½æˆå°±ä¸¤ç§ç±»åž‹
- ðŸ”„ **å¤šå‘¨ç›®æ¨¡å¼ï¼ˆNew Game Plusï¼‰** - è§£é”æœ€ç»ˆç»“å±€åŽå¯é€‰æ‹©ä»»æ„ç« èŠ‚é‡æ–°å¼€å§‹
- ðŸ’¾ **è‡ªåŠ¨å­˜æ¡£** - æ¸¸æˆè¿›åº¦è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
- â° **æ—¶é—´æ˜¾ç¤º** - æ”¯æŒåŠ¨æ€æ—¶é—´æ˜¾ç¤ºï¼Œå¸¦æ•°å­—æ»šåŠ¨åŠ¨ç”»
- ðŸ“Š **è¿›åº¦æ¡** - å¯è§†åŒ–æ˜¾ç¤ºæ¸¸æˆè¿›åº¦
- ðŸŽ¨ **ä¸»é¢˜å®šåˆ¶** - æ”¯æŒè‡ªå®šä¹‰é¢œè‰²ä¸»é¢˜ï¼Œè‡ªåŠ¨é€‚é…æ–‡æœ¬é¢œè‰²

### äº¤äº’åŠŸèƒ½
- ðŸ–±ï¸ **ç‚¹å‡»ç»§ç»­** - ç‚¹å‡»å±å¹•ç»§ç»­é˜…è¯»å‰§æƒ…
- âŒ¨ï¸ **é”®ç›˜å¿«æ·é”®** - æ”¯æŒæ–¹å‘é”®å¿«é€Ÿæ“ä½œ
- â†©ï¸ **æ’¤å›žåŠŸèƒ½** - å¯ä»¥æ’¤å›žä¸Šä¸€ä¸ªé€‰æ‹©
- â­ï¸ **è·³è¿‡åŠŸèƒ½** - å¿«é€Ÿè·³è¿‡å½“å‰æ®µè½
- ðŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾Žé€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯

### è§†è§‰æ•ˆæžœ
- ðŸŽ¬ **ç« èŠ‚è½¬åœºåŠ¨ç”»** - ç« èŠ‚åˆ‡æ¢æ—¶çš„å…¨å±æ ‡é¢˜åŠ¨ç”»
- ðŸŒ«ï¸ **åŠ¨æ€æš—è§’æ•ˆæžœ** - æ ¹æ®æ•°å€¼å˜åŒ–è°ƒæ•´è§†è§‰å¼ºåº¦
- ðŸ“³ **éœ‡åŠ¨åé¦ˆ** - ç‰¹å®šåœºæ™¯ä¸‹çš„è®¾å¤‡éœ‡åŠ¨
- ðŸŽ­ **è§†è§‰ç‰¹æ•ˆ** - æ”¯æŒéœ‡åŠ¨ã€æ¨¡ç³Šç­‰ç‰¹æ•ˆ
- ðŸŽ¨ **å™ªç‚¹çº¹ç†** - å¤å¤é£Žæ ¼çš„è§†è§‰çº¹ç†

## ðŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨

1. **ç›´æŽ¥æ‰“å¼€**
   - å°† `index.html` æ–‡ä»¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
   - å¼•æ“Žä¼šè‡ªåŠ¨å°è¯•åŠ è½½åŒç›®å½•ä¸‹çš„ `libretto.json` æ–‡ä»¶

2. **å¯¼å…¥å‰§æœ¬**
   - å¦‚æžœè‡ªåŠ¨åŠ è½½å¤±è´¥ï¼Œç‚¹å‡»"ðŸ“‚ å¯¼å…¥å‰§æœ¬ (JSON)"æŒ‰é’®
   - é€‰æ‹©ç¬¦åˆæ ¼å¼è¦æ±‚çš„ JSON å‰§æœ¬æ–‡ä»¶

3. **å¼€å§‹æ¸¸æˆ**
   - ç‚¹å‡»"å¼€å§‹æ–°æ•…äº‹"å¼€å§‹æ¸¸æˆ
   - æˆ–ç‚¹å‡»"ç»§ç»­æ¸¸æˆ"ç»§ç»­ä¹‹å‰çš„è¿›åº¦

### æ“ä½œè¯´æ˜Ž

- **ç‚¹å‡»å±å¹•** - ç»§ç»­é˜…è¯»ä¸‹ä¸€æ®µå‰§æƒ…
- **â† é”® / A é”®** - æ’¤å›žä¸Šä¸€ä¸ªé€‰æ‹©
- **â†’ é”® / D é”®** - è·³è¿‡å½“å‰æ®µè½
- **ä¸»é¡µæŒ‰é’®** - è¿”å›žä¸»èœå•ï¼ˆè‡ªåŠ¨ä¿å­˜ï¼‰

## ðŸ“ å‰§æœ¬æ ¼å¼è¯´æ˜Ž

### åŸºæœ¬ç»“æž„

å‰§æœ¬æ–‡ä»¶æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ä¸»è¦éƒ¨åˆ†ï¼š

```json
{
  "startNodeId": "Node_100",
  "meta": {
    "title": "æ¸¸æˆæ ‡é¢˜",
    "subtitle": "å‰¯æ ‡é¢˜",
    "author": "ä½œè€…å",
    "initialVariable": 80,
    "initialTime": "8æœˆ12æ—¥ 12ï¼š00",
    "variableName": "æ•°å€¼å",
    "nodeNameMap": {
      "Node_100": "ç« èŠ‚åç§°"
    },
    "theme": {
      "bgBase": "#F8F9FA",
      "bgIntense": "#E9ECEF",
      "textColor": "#212529",
      "accentColor": "#495057",
      "barColor": "#6C757D"
    }
  },
  "nodes": {
    "Node_100": {
      // èŠ‚ç‚¹å†…å®¹
    }
  }
}
```

### Meta å­—æ®µè¯´æ˜Ž

| å­—æ®µ | ç±»åž‹ | è¯´æ˜Ž | å¿…å¡« |
|------|------|------|------|
| `title` | string | æ¸¸æˆæ ‡é¢˜ | âœ… |
| `subtitle` | string | å‰¯æ ‡é¢˜ | âŒ |
| `author` | string | ä½œè€…å | âŒ |
| `initialVariable` | number | åˆå§‹æ•°å€¼ï¼ˆ0-100ï¼‰ | âŒ |
| `initialTime` | string | åˆå§‹æ—¶é—´æ˜¾ç¤º | âŒ |
| `variableName` | string | æ•°å€¼æ˜¾ç¤ºåç§°ï¼ˆå¦‚"å‹‡æ°”"ï¼‰ | âŒ |
| `nodeNameMap` | object | èŠ‚ç‚¹IDåˆ°åç§°çš„æ˜ å°„ï¼ˆç”¨äºŽNG+ï¼‰ | âŒ |
| `theme` | object | ä¸»é¢˜é¢œè‰²é…ç½® | âŒ |

### Node èŠ‚ç‚¹ç»“æž„

æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "Node_100": {
    "chapterTitle": "ç¬¬ä¸€ç« ",           // ç« èŠ‚æ ‡é¢˜ï¼ˆä¼šæ˜¾ç¤ºè½¬åœºåŠ¨ç”»ï¼‰
    "time": "8æœˆ12æ—¥ 12ï¼š00",          // èŠ‚ç‚¹æ—¶é—´
    "progress": 10,                     // è¿›åº¦å€¼ï¼ˆ0-100ï¼‰
    "initialVariable": 80,              // èŠ‚ç‚¹åˆå§‹æ•°å€¼
    "segments": [                       // æ–‡æœ¬æ®µè½æ•°ç»„
      {
        "speaker": "è§’è‰²å",           // è¯´è¯è€…ï¼ˆç©ºå­—ç¬¦ä¸²è¡¨ç¤ºæ—ç™½ï¼‰
        "time": "8æœˆ12æ—¥ 12ï¼š00",      // æ®µè½æ—¶é—´ï¼ˆå¯é€‰ï¼‰
        "text": "æ–‡æœ¬å†…å®¹",
        "changes": {                    // æ•°å€¼å˜åŒ–ï¼ˆå¯é€‰ï¼‰
          "val": 5,                     // å¢žåŠ æ•°å€¼
          "valSet": 80,                 // è®¾ç½®æ•°å€¼
          "addFlag": "flag_name",       // æ·»åŠ æ ‡è®°
          "removeFlag": "flag_name"     // ç§»é™¤æ ‡è®°
        },
        "effect": "shake",              // è§†è§‰ç‰¹æ•ˆï¼ˆshake/blurï¼‰
        "achievement": {                // æ®µè½æˆå°±ï¼ˆå¯é€‰ï¼‰
          "time": "8æœˆ12æ—¥ 12ï¼š00",
          "name": "æˆå°±åç§°",
          "description": "æˆå°±æè¿°"
        }
      }
    ],
    "choices": [                        // é€‰æ‹©é¡¹æ•°ç»„
      {
        "text": "é€‰æ‹©æ–‡æœ¬",
        "condition": "val >= 50",      // æ˜¾ç¤ºæ¡ä»¶ï¼ˆå¯é€‰ï¼‰
        "changes": {
          "val": 10
        },
        "next": "Node_200"              // ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ID
      }
    ],
    "routes": [                         // è‡ªåŠ¨è·¯ç”±ï¼ˆä¼˜å…ˆçº§é«˜äºŽchoicesï¼‰
      {
        "condition": "val >= 80",
        "next": "Node_300"
      },
      {
        "condition": "default",
        "next": "Node_400"
      }
    ],
    "next": "Node_200",                 // ç›´æŽ¥è·³è½¬ï¼ˆæ— é€‰æ‹©æ—¶ï¼‰
    "isEnding": true,                   // æ˜¯å¦ä¸ºç»“å±€èŠ‚ç‚¹
    "title": "ç»“å±€æ ‡é¢˜",                // ç»“å±€æ ‡é¢˜
    "type": "True Ending",              // ç»“å±€ç±»åž‹
    "description": "ç»“å±€æè¿°æ–‡æœ¬",      // ç»“å±€æè¿°
    "id": "Ending_6"                    // ç»“å±€ID
  }
}
```

### æ¡ä»¶è¡¨è¾¾å¼

æ”¯æŒä»¥ä¸‹æ¡ä»¶æ ¼å¼ï¼š

- **æ•°å€¼æ¯”è¾ƒ**: `val >= 50`, `val <= 30`, `val > 80`, `val < 20`, `val == 100`
- **æ ‡è®°æ£€æŸ¥**: `hasFlag('flag_name')`, `!hasFlag('flag_name')`
- **é»˜è®¤è·¯ç”±**: `"default"`ï¼ˆå½“æ‰€æœ‰å…¶ä»–æ¡ä»¶éƒ½ä¸æ»¡è¶³æ—¶ï¼‰

### ç³»ç»Ÿæ–‡æœ¬

å½“ `speaker` ä¸º `"ç³»ç»Ÿ"` æˆ– `"System"` æ—¶ï¼Œæ–‡æœ¬ä¼šä»¥æ–œä½“ç°è‰²æ ·å¼æ˜¾ç¤ºï¼Œç”¨äºŽæ—ç™½ã€çŽ¯å¢ƒæè¿°ç­‰ã€‚

## ðŸŽ® æ¸¸æˆå†…å®¹

é¡¹ç›®åŒ…å«åˆ›ä½œçš„åŒäººæ¸¸æˆã€Šè‡ªæ–°ä¸–ç•Œã€‹ï¼š

- **æ•…äº‹ç±»åž‹**: æ—¶é—´å¾ªçŽ¯å†’é™©
- **æ ¸å¿ƒæœºåˆ¶**: å‹‡æ°”å€¼ç³»ç»Ÿ
- **ç»“å±€æ•°é‡**: 6ä¸ªï¼ˆ1ä¸ªTrue Endingï¼Œ1ä¸ªNormal Endingï¼Œ4ä¸ªBad Endingï¼‰
- **æˆå°±ç³»ç»Ÿ**: æ®µè½æˆå°±17ä¸ª

è¯¦ç»†æµç¨‹è¯·å‚è€ƒ `æ¸¸æˆæµç¨‹å›¾.md`ã€‚

## ðŸ“ æ–‡ä»¶ç»“æž„

```
git/
â”œâ”€â”€ index.html              # ä¸»å¼•æ“Žæ–‡ä»¶ï¼ˆåŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼‰
â”œâ”€â”€ libretto.json           # ç¤ºä¾‹æ¸¸æˆå‰§æœ¬
â”œâ”€â”€ æ¸¸æˆæµç¨‹å›¾.md           # æ¸¸æˆæµç¨‹è¯´æ˜Žæ–‡æ¡£
â”œâ”€â”€ è‡ªæ–°ä¸–ç•Œ.txt            # åŽŸå§‹æ–‡æœ¬å†…å®¹
â””â”€â”€ README.md               # æœ¬æ–‡ä»¶
```

## ðŸ› ï¸ æŠ€æœ¯ç‰¹æ€§

- **çº¯å‰ç«¯å®žçŽ°** - æ— éœ€æœåŠ¡å™¨ï¼Œå•æ–‡ä»¶å³å¯è¿è¡Œ
- **æœ¬åœ°å­˜å‚¨** - ä½¿ç”¨ localStorage ä¿å­˜æ¸¸æˆè¿›åº¦å’Œæˆå°±
- **å“åº”å¼è®¾è®¡** - å®Œç¾Žé€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **æ— ä¾èµ–** - ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨åº“æˆ–æ¡†æž¶
- **çŽ°ä»£æµè§ˆå™¨æ”¯æŒ** - æ”¯æŒæ‰€æœ‰çŽ°ä»£æµè§ˆå™¨

## ðŸŽ¨ ä¸»é¢˜å®šåˆ¶

åœ¨ `meta.theme` ä¸­é…ç½®ä¸»é¢˜é¢œè‰²ï¼š

```json
"theme": {
  "bgBase": "#F8F9FA",        // åŸºç¡€èƒŒæ™¯è‰²
  "bgIntense": "#E9ECEF",     // é«˜æ•°å€¼æ—¶çš„èƒŒæ™¯è‰²
  "textColor": "#212529",     // æ–‡æœ¬é¢œè‰²
  "accentColor": "#495057",   // å¼ºè°ƒè‰²
  "barColor": "#6C757D"       // æ•°å€¼æ¡é¢œè‰²
}
```

å¼•æ“Žä¼šæ ¹æ®èƒŒæ™¯è‰²äº®åº¦è‡ªåŠ¨è°ƒæ•´æ–‡æœ¬é¢œè‰²ï¼Œç¡®ä¿å¯è¯»æ€§ã€‚

## ðŸ”§ é«˜çº§åŠŸèƒ½

### å¤šå‘¨ç›®æ¨¡å¼ï¼ˆNew Game Plusï¼‰

è§£é”æœ€ç»ˆç»“å±€åŽï¼Œå¯ä»¥ï¼š
- é€‰æ‹©ä»»æ„å·²è®¿é—®çš„ç« èŠ‚ä½œä¸ºèµ·å§‹ç‚¹
- ä¿ç•™æˆå°±è®°å½•
- é‡æ–°ä½“éªŒä¸åŒåˆ†æ”¯

### æˆå°±ç³»ç»Ÿ

- **ç»“å±€æˆå°±**: è¾¾æˆä¸åŒç»“å±€æ—¶è§£é”
- **æ®µè½æˆå°±**: åœ¨ç‰¹å®šæ®µè½ä¸­è§¦å‘ï¼Œæ˜¾ç¤ºè§£é”æ—¶é—´å’Œæè¿°

### å­˜æ¡£ç³»ç»Ÿ

- è‡ªåŠ¨ä¿å­˜æ¸¸æˆè¿›åº¦
- ä¿å­˜æˆå°±è®°å½•
- ä¿å­˜ç« èŠ‚è®¿é—®åŽ†å²ï¼ˆç”¨äºŽNG+ï¼‰

## ðŸ“± ç§»åŠ¨ç«¯é€‚é…

å¼•æ“Žå·²é’ˆå¯¹ç§»åŠ¨ç«¯è¿›è¡Œä¼˜åŒ–ï¼š
- å“åº”å¼å­—ä½“å¤§å°
- è§¦æ‘¸å‹å¥½çš„äº¤äº’
- é€‚é…å°å±å¹•çš„æ—¶é—´æ˜¾ç¤º
- ä¼˜åŒ–çš„æŒ‰é’®å°ºå¯¸

## ðŸ› å·²çŸ¥é™åˆ¶

- å‰§æœ¬æ–‡ä»¶éœ€è¦ç¬¦åˆä¸¥æ ¼çš„ JSON æ ¼å¼
- èŠ‚ç‚¹IDå¿…é¡»å”¯ä¸€ä¸”æ­£ç¡®å¼•ç”¨
- æ¡ä»¶è¡¨è¾¾å¼è¯­æ³•æœ‰é™ï¼Œä¸æ”¯æŒå¤æ‚é€»è¾‘
- æœ¬åœ°å­˜å‚¨æœ‰å¤§å°é™åˆ¶ï¼ˆé€šå¸¸ 5-10MBï¼‰

## ðŸ“„ è®¸å¯

æœ¬é¡¹ç›®ä¸ºå¼€æºé¡¹ç›®ï¼Œå¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ã€‚

## ðŸ™ è‡´è°¢

- åŽŸå¼•æ“Žæ¥è‡ªå°çº¢ä¹¦åšä¸» å±±éŸ³ï¼ˆå°çº¢ä¹¦å·ï¼šlifish0623ï¼‰
- æ„Ÿè°¢å°çº¢ä¹¦ç”¨æˆ· å¸ƒæœ—å°¼æƒ³æ€Žæ · åˆ†äº«æ–‡ä»¶

---

**äº«å—ä½ çš„æ–‡å­—å†’é™©ä¹‹æ—…ï¼** ðŸŽ®âœ¨

